{% extends "base.html" %}
{% block title %}Registrácia{% endblock %}

{% block content %}
<main class="form-signin w-100 m-auto d-flex flex-column align-items-center" style="padding-top:32px;padding-bottom:80px;">

  <!-- Wrapper -->
  <div class="p-5 shadow-sm border rounded-4" style="max-width:600px;width:100%;background-color:#fff;">
    <!-- Post back to the same URL; change to url_for('registracia') once the route exists -->
    <form method="POST" enctype="multipart/form-data" action="/registracia">
      <h1 class="h3 mb-2 text-center">Vytvoriť nový účet</h1>
      <p class="text-muted text-center mb-4">Vytvor si účet a posuň svoje zručnosti na novú úroveň.</p>

      <!-- Meno -->
      <div class="form-floating mb-4">
        <input type="text" class="form-control" id="floatingName" name="name" placeholder="Tvoje meno" required>
        <label for="floatingName">Meno</label>
      </div>

      <!-- Email (predvyplní sa z ?email=...) -->
      <div class="form-floating mb-4">
        <input type="email"
               class="form-control"
               id="floatingEmail"
               name="email"
               placeholder="meno@example.com"
               value="{{ request.args.get('email','') }}"
               required>
        <label for="floatingEmail">Emailová adresa</label>
      </div>

      <!-- Heslo -->
      <div class="form-floating mb-4 position-relative">
        <input type="password" class="form-control" id="floatingPassword" name="password" placeholder="Heslo" minlength="6" required>
        <label for="floatingPassword">Heslo</label>

        <!-- Toggle (bez závislosti na ikonách) -->
        <button type="button" id="pwToggle"
                class="btn btn-sm btn-outline-secondary"
                style="position:absolute;right:10px;top:50%;transform:translateY(-50%);padding:.25rem .5rem;">
          Zobraziť
        </button>
      </div>

      <!-- Profilová fotka -->
      <div class="mb-4">
        <label for="formFile" class="form-label small text-muted">Nahraj si profilovú fotku 📸</label>
        <input class="form-control" type="file" id="formFile" name="photo" accept="image/*">
        <div id="fileName" class="form-text text-muted mt-1"></div>
      </div>

      <hr class="my-4">

      <button class="btn btn-primary w-100 py-2 mb-3" type="submit">Vytvoriť účet</button>

      <!-- Link späť na login (use plain path so the page renders even without a route yet) -->
      <div class="text-center mt-2">
        <small class="text-muted">
          Už máš účet?
          <a href="/login" class="text-decoration-none">Prihlás sa tu</a>.
        </small>
      </div>

      <p class="mt-3 mb-0 text-center text-muted" style="font-size:13px;">
        Registráciou súhlasíš s podmienkami používania a ochranou osobných údajov.
      </p>
    </form>
  </div>
</main>

<script>
  // Toggle hesla (bez knižníc)
  (function(){
    const input = document.getElementById('floatingPassword');
    const btn   = document.getElementById('pwToggle');
    if(!input || !btn) return;
    btn.addEventListener('click', ()=>{
      const isPw = input.type === 'password';
      input.type = isPw ? 'text' : 'password';
      btn.textContent = isPw ? 'Skryť' : 'Zobraziť';
      input.focus();
    });
  })();

  // Zobraz názov nahraného súboru
  (function(){
    const file = document.getElementById('formFile');
    const out  = document.getElementById('fileName');
    if(!file || !out) return;
    file.addEventListener('change', ()=>{
      out.textContent = file.files && file.files[0] ? file.files[0].name : '';
    });
  })();
</script>
{% endblock %}

{% block footer %}{% endblock %}
