{% extends "base.html" %}
{% block title %}Registr치cia{% endblock %}

{% block content %}
<main class="form-signin w-100 m-auto d-flex flex-column align-items-center" style="padding-top:32px;padding-bottom:80px;">

  <!-- Wrapper -->
  <div class="p-5 shadow-sm border rounded-4" style="max-width:600px;width:100%;background-color:#fff;">
    <!-- Post back to the same URL; change to url_for('registracia') once the route exists -->
    <form method="POST" enctype="multipart/form-data" action="/registracia">
      <h1 class="h3 mb-2 text-center">Vytvori콘 nov칳 칰캜et</h1>
      <p class="text-muted text-center mb-4">Vytvor si 칰캜et a posu켿 svoje zru캜nosti na nov칰 칰rove켿.</p>

      <!-- Meno -->
      <div class="form-floating mb-4">
        <input type="text" class="form-control" id="floatingName" name="name" placeholder="Tvoje meno" required>
        <label for="floatingName">Meno</label>
      </div>

      <!-- Email (predvypln칤 sa z ?email=...) -->
      <div class="form-floating mb-4">
        <input type="email"
               class="form-control"
               id="floatingEmail"
               name="email"
               placeholder="meno@example.com"
               value="{{ request.args.get('email','') }}"
               required>
        <label for="floatingEmail">Emailov치 adresa</label>
      </div>

      <!-- Heslo -->
      <div class="form-floating mb-4 position-relative">
        <input type="password" class="form-control" id="floatingPassword" name="password" placeholder="Heslo" minlength="6" required>
        <label for="floatingPassword">Heslo</label>

        <!-- Toggle (bez z치vislosti na ikon치ch) -->
        <button type="button" id="pwToggle"
                class="btn btn-sm btn-outline-secondary"
                style="position:absolute;right:10px;top:50%;transform:translateY(-50%);padding:.25rem .5rem;">
          Zobrazi콘
        </button>
      </div>

      <!-- Profilov치 fotka -->
      <div class="mb-4">
        <label for="formFile" class="form-label small text-muted">Nahraj si profilov칰 fotku 游닞</label>
        <input class="form-control" type="file" id="formFile" name="photo" accept="image/*">
        <div id="fileName" class="form-text text-muted mt-1"></div>
      </div>

      <hr class="my-4">

      <button class="btn btn-primary w-100 py-2 mb-3" type="submit">Vytvori콘 칰캜et</button>

      <!-- Link sp칛콘 na login (use plain path so the page renders even without a route yet) -->
      <div class="text-center mt-2">
        <small class="text-muted">
          U m치코 칰캜et?
          <a href="/login" class="text-decoration-none">Prihl치s sa tu</a>.
        </small>
      </div>

      <p class="mt-3 mb-0 text-center text-muted" style="font-size:13px;">
        Registr치ciou s칰hlas칤코 s podmienkami pou쮂셨ania a ochranou osobn칳ch 칰dajov.
      </p>
    </form>
  </div>
</main>

<script>
  // Toggle hesla (bez kni쬹칤c)
  (function(){
    const input = document.getElementById('floatingPassword');
    const btn   = document.getElementById('pwToggle');
    if(!input || !btn) return;
    btn.addEventListener('click', ()=>{
      const isPw = input.type === 'password';
      input.type = isPw ? 'text' : 'password';
      btn.textContent = isPw ? 'Skry콘' : 'Zobrazi콘';
      input.focus();
    });
  })();

  // Zobraz n치zov nahran칠ho s칰boru
  (function(){
    const file = document.getElementById('formFile');
    const out  = document.getElementById('fileName');
    if(!file || !out) return;
    file.addEventListener('change', ()=>{
      out.textContent = file.files && file.files[0] ? file.files[0].name : '';
    });
  })();
</script>
{% endblock %}

{% block footer %}{% endblock %}
